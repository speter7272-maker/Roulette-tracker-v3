<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Roulette Trend Tracker • CASH SCORE TEST • Build: 2026-01-03</title>
  <style>
    :root{color-scheme:dark; --bg:#0b1220; --card:#0f1a2e; --muted:#94a3b8; --txt:#e5e7eb; --accent:#60a5fa; --warn:#fbbf24; --danger:#ef4444; --ok:#34d399; --chip:#111c33; --border:#1f2a44;}
    *{box-sizing:border-box}
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:linear-gradient(180deg,#070b14,#0b1220 40%,#070b14);color:var(--txt)}
    .wrap{max-width:980px;margin:0 auto;padding:18px 14px 40px}
    h1{font-size:28px;margin:0 0 6px}
    .pill{background:var(--chip);border:1px solid var(--border);border-radius:999px;padding:8px 10px;font-size:12px;color:var(--muted)}
    .card{background:rgba(15,26,46,.88);border:1px solid var(--border);border-radius:16px;padding:14px;margin:12px 0}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .btn{border:1px solid var(--border);background:var(--chip);color:var(--txt);padding:10px 12px;border-radius:12px;font-weight:700}
    .btn.primary{border-color:rgba(96,165,250,.45);background:rgba(96,165,250,.18)}
    textarea,input{width:100%;border-radius:14px;border:1px solid var(--border);background:#0b152b;color:var(--txt);padding:10px}
    .kbd{display:grid;grid-template-columns:repeat(6,1fr);gap:8px}
    .key{padding:12px;border-radius:12px;border:1px solid var(--border);background:#0c1730;font-weight:900}
    .stat{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
    .box{background:#0c1730;border:1px solid var(--border);border-radius:14px;padding:10px}
    .k{color:var(--muted);font-size:11px}
    .v{font-size:16px;font-weight:900}
    .topplays{display:grid;gap:8px}
    .playcard{border:1px solid rgba(255,255,255,.12);padding:10px;border-radius:12px}
    .tag{font-size:12px;padding:2px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.14)}
  </style>
</head>
<body>
<div class="wrap">
  <h1>Roulette Trend Tracker</h1>
  <div class="pill">TEST BUILD • CASH SCORE LOGIC • 2026-01-03</div>

  <div class="card">
    <div class="row">
      <div class="pill">Window: <b id="winLabel">15</b></div>
      <div class="pill">Spins: <b id="spinCount">0</b></div>
      <div class="pill">Session: <b id="sessionCount">0</b></div>
    </div>
  </div>

  <div class="card">
    <div class="kbd" id="kbd"></div>
  </div>

  <div class="card">
    <div class="stat">
      <div class="box">
        <div class="k">Recommended</div>
        <div class="v" id="recommend">—</div>
        <div class="k" id="reason"></div>
      </div>
      <div class="box">
        <div class="k">Table State</div>
        <div class="v" id="state">—</div>
      </div>
    </div>
  </div>

  <div class="card">
    <div style="font-weight:900">Top Strategies</div>
    <div id="topPlays" class="topplays"></div>
  </div>
</div>

<script>
/* ---------- CORE STATE ---------- */
let spins=[];
let sessionId=1;
let windowN=15;

/* ---------- HELPERS ---------- */
const $=id=>document.getElementById(id);
const isHigh=n=>n>=19;
const isLow=n=>n>=1&&n<=18;
const counts=a=>{
  let c={high:0,low:0};
  a.forEach(n=>{if(isHigh(n))c.high++; if(isLow(n))c.low++;});
  return c;
};

/* ---------- SCORING ---------- */
function scoreStrategies(vals){
  const w15=vals.slice(0,15);
  const c=counts(w15);

  const plays=[];
  const add=(mode,name,score,why)=>plays.push({mode,name,score,why});

  // CASH — Gold Mine
  const hlMax=Math.max(c.high,c.low);
  const goldScore=hlMax>=9?90:hlMax>=8?85:70;
  add("CASH","Gold Mine (Even-Money Compression)",goldScore,`HL ${hlMax}/15`);

  // COMP — 6 Diamonds
  add("COMP","6 Diamonds + 0/00 (Primary)",80,"Coverage fallback");

  plays.sort((a,b)=>b.score-a.score);

  let top=plays[0];
  if(!(top.mode==="CASH"&&top.score>=85)){
    top=plays.find(p=>p.mode==="COMP");
  }
  return {primary:top,plays:plays.slice(0,3),state:"TEST"};
}

/* ---------- UI ---------- */
function render(){
  $("spinCount").textContent=spins.length;
  $("sessionCount").textContent=spins.filter(s=>s.s===sessionId).length;
  const recent=spins.map(x=>x.n);
  const scored=scoreStrategies(recent);

  $("recommend").textContent=`${scored.primary.mode} — ${scored.primary.name}`;
  $("reason").textContent=scored.primary.why;
  $("state").textContent=scored.state;

  $("topPlays").innerHTML="";
  scored.plays.forEach(p=>{
    const d=document.createElement("div");
    d.className="playcard";
    d.innerHTML=`<b>${p.mode}</b> — ${p.name}<span class="tag">${p.score}</span>`;
    $("topPlays").appendChild(d);
  });
}

/* ---------- INPUT ---------- */
function addSpin(n){
  spins.unshift({n,s:sessionId});
  render();
}
(function(){
  const k=$("kbd");
  ["00",0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36].forEach(x=>{
    const b=document.createElement("button");
    b.className="key";
    b.textContent=x;
    b.onclick=()=>addSpin(Number(x)||0);
    k.appendChild(b);
  });
})();
render();
</script>
</body>
</html>